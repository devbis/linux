# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/phy/qcom,usb-hs-phy.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Qualcomm's USB HS PHY binding description

maintainers:
  - Bjorn Andersson <bjorn.andersson@linaro.org>

properties:
  compatible:
    items:
      - enum:
          - qcom,usb-hs-phy-apq8064
          - qcom,usb-hs-phy-msm8916
          - qcom,usb-hs-phy-msm8974
      - const: qcom,usb-hs-phy

  clocks: true

  clock-names:
    oneOf:
      - items:
          - const: ref
          - const: sleep
      - items:
          - const: sleep
          - const: ref

  resets: true

  reset-names:
    oneOf:
      - items:
          - const: por
      - items:
          - const: phy
          - const: por

  "#phy-cells":
    const: 0

  v3p3-supply: true
  v1p8-supply: true
  extcon: true

  qcom,init-seq:
    $ref: /schemas/types.yaml#/definitions/uint8-array
    description: |
      Should contain a sequence of ULPI address and value pairs to
      program into the ULPI_EXT_VENDOR_SPECIFIC area. This is related
      to Device Mode Eye Diagram test. The addresses are offsets
      from the ULPI_EXT_VENDOR_SPECIFIC address, for example,
      <0x1 0x53> would mean "write the value 0x53 to address 0x81".

required:
  - clocks
  - clock-names
  - resets
  - reset-names
  - "#phy-cells"

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/qcom,gcc-msm8974.h>
    otg: usb-controller {
      ulpi {
        phy {
          compatible = "qcom,usb-hs-phy-msm8974", "qcom,usb-hs-phy";
          #phy-cells = <0>;
          clocks = <&xo_board>, <&gcc GCC_USB2A_PHY_SLEEP_CLK>;
          clock-names = "ref", "sleep";
          resets = <&gcc GCC_USB2A_PHY_BCR>, <&otg 0>;
          reset-names = "phy", "por";
          v3p3-supply = <&pm8941_l24>;
          v1p8-supply = <&pm8941_l6>;
          extcon = <&smbb>;
          qcom,init-seq = /bits/ 8 <0x1 0x63>;
        };
      };
    };
